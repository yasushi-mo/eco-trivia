# エコ・トリビア アプリ 開発計画書

## 🎯 目的

要件定義に基づき、ユーザー登録不要で楽しめるエコ・トリビアアプリを、コスト効率良く、高品質な TypeScript モノレポ環境で開発する。

## 1. フェーズ 1: セットアップとインフラ (4 日間目安)

技術基盤と開発環境を構築します。

### 1.1 モノレポ・環境設定

- [x] 1.1.1 プロジェクトリポジトリ（GitHub）の作成

- [x] [1.1.2 npm workspaces を使用したモノレポ構造の初期設定（/frontend, /backend, /shared）]()

[ ] 1.1.3 TypeScript 設定ファイル (tsconfig.json) のモノレポ全体での設定

[ ] 1.1.4 ESLint/Prettier の設定とコードフォーマットの自動化設定

[ ] 1.1.5 開発環境構築ガイド (DEV.md) の作成開始

### 1.2 データベースと Docker

[ ] 1.2.1 Docker 環境構築（PostgreSQL と Node.js コンテナの定義）

[ ] 1.2.2 データベースの環境変数設定（ローカル/Render 接続情報）

[ ] 1.2.3 Render アカウント作成と PostgreSQL インスタンスのプロビジョニング

## 2. フェーズ 2: バックエンド開発とデータ層 (7 日間目安)

データベースと API ロジックを実装します。

### 2.1 データモデリング（Prisma/PostgreSQL）

[ ] 2.1.1 Prisma スキーマの定義（Quizzes, Trivia, Tags, QuizTags）

[ ] 2.1.2 データベースマイグレーションの実行と PostgreSQL への初期適用

[ ] 2.1.3 データアクセス層（Repository）のインターフェース定義（Prisma クライアント利用）

### 2.2 ビジネスロジック実装

[ ] 2.2.1 QuizRepository の実装（クイズ、トリビア、タグのデータ取得メソッド）

[ ] 2.2.2 QuizService の実装（ランダムな日替わりクイズ選択ロジック）

[ ] 2.2.3 QuizService の実装（回答の正誤判定ロジック）

### 2.3 API 開発 (Express)

[ ] 2.3.1 QuizController の定義と Express ルートの設定

[ ] 2.3.2 API エンドポイント /quiz/today (GET) の実装とテスト

[ ] 2.3.3 API エンドポイント /quiz/{id}/answer (POST) の実装とテスト

[ ] 2.3.4 Zod を使用した API リクエストの入力バリデーション実装

## 3. フェーズ 3: フロントエンド開発 (8 日間目安)

ユーザーインターフェースとクライアント側のロジックを実装します。

### 3.1 ベース設定とルーティング

[ ] 3.1.1 React アプリケーションの初期設定と TypeScript 連携

[ ] 3.1.2 React Router を使用したルーティング設定（クイズ画面、結果画面）

[ ] 3.1.3 ベースとなる UI テーマ（配色、フォント）の適用

### 3.2 UI コンポーネント実装

[ ] 3.2.1 共通コンポーネントの作成（Header, Layout, Button, LoadingSpinner）

[ ] 3.2.2 QuizScreen の主要 UI コンポーネント作成（問題文表示、選択肢）

[ ] 3.2.3 TriviaScreen の主要 UI コンポーネント作成（結果、解説文）

### 3.3 データ連携とフォーム

[ ] 3.3.1 SWR/Axios を使用した API クライアントの作成

[ ] 3.3.2 QuizScreen での /quiz/today API 呼び出しとデータ表示

[ ] 3.3.3 React Hook Form を使用した回答フォームの管理と送信処理

## 4. フェーズ 4: 統合とテスト (5 日間目安)

各層の結合と品質保証を行います。

### 4.1 ユニット・統合テスト

[ ] 4.1.1 バックエンド（Service/Repository）のユニットテスト実装（Vitest）

[ ] 4.1.2 フロントエンド（コンポーネント）の単体テスト実装（Vitest）

[ ] 4.1.3 フロントエンドとバックエンドの API 通信統合テスト

### 4.2 E2E テスト

[ ] 4.2.1 Playwright のセットアップとブラウザ環境設定

[ ] 4.2.2 E2E テストケース作成（クイズ挑戦、回答、解説表示）

[ ] 4.2.3 Playwright による E2E テストの実行とデバッグ

### 4.3 CI/CD 連携

[ ] 4.3.1 GitHub Actions ワークフローの定義（プッシュ時の自動テスト実行）

## 5. フェーズ 5: デプロイとリリース (3 日間目安)

本番環境への移行とコンテンツの準備を行います。

### 5.1 コンテンツと非機能要件

[ ] 5.1.1 初期コンテンツの作成と PostgreSQL への投入（クイズ 100 問以上）

[ ] 5.1.2 UI/UX の最終確認（外部設計書との照合）

[ ] 5.1.3 非機能要件のパフォーマンステスト（読み込み 1 秒以内を目標）

### 5.2 本番デプロイ

[ ] 5.2.1 Render へのバックエンド（Web Service）のデプロイ設定

[ ] 5.2.2 Render へのフロントエンド（Static Site）のデプロイ設定

[ ] 5.2.3 GitHub Actions を使用した Render への自動デプロイ設定の完了

[ ] 5.2.4 本番環境での最終動作確認とリリース
