# ディレクトリ構造

```
/eco-trivia
├── packages/
│   ├── frontend/  # Reactアプリケーション（App）
│   ├── backend/   # Expressサーバー（App）
│   └── shared/    # 共通の型定義やユーティリティ（Library/Package）
└── package.json   # ルートのpackage.json
```

※npm workspaces の仕組み上、frontend、backend、shared の全てを workspaces フィールドが認識できる packages ディレクトリ内に配置することが、設定のシンプルさと一貫性を保つ上で最も効果的です。shared は他のパッケージから参照される内部ライブラリとして機能します。

# TSConfig

ここでは、ルートの `tsconfig.json` に記述されている各項目について、それぞれの役割と目的を解説します。

---

## TypeScript 設定ファイル (`tsconfig.json`) の解説

### `compilerOptions` (コンパイラオプション)

このセクションは、TypeScript コードを JavaScript に変換する際の挙動を細かく定義する、最も重要な部分です。

| 設定項目                               | 値       | 目的と役割                                                                                                                                                                                                                                        |
| :------------------------------------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **`target`**                           | `es2023` | 生成される JavaScript のバージョンを**ECMAScript 2023**に指定します。これにより、コンパイラがモダンな JavaScript の機能（例: `at()` メソッド、正規表現の変更など）をそのまま利用できるため、より効率的でクリーンなコードが出力されます。          |
| **`module`**                           | `esnext` | どのモジュールシステムを使用するかを指定します。`esnext` は、ES Modules の最新かつ柔軟な形式を指定しており、主に **Vite** や最新の **Node.js** 環境で推奨される設定です。                                                                         |
| **`moduleResolution`**                 | `node`   | モジュールをどのように解決するか（インポートパスをどう探すか）の戦略を指定します。最新の **Node.js** の動作に合わせたモジュール解決戦略を使用します。                                                                                             |
| **`strict`**                           | `true`   | **TypeScript の厳格な型チェックをすべて有効**にします（`strictNullChecks`, `noImplicitAny` など）。これにより、実行時のエラーを防ぎ、コードの信頼性が大幅に向上します。現代の TypeScript 開発では必須とされる設定です。                           |
| **`esModuleInterop`**                  | `true`   | **CommonJS** モジュール（`require()`）と **ES Modules**（`import`）の互換性を高めます。異なるモジュール形式のライブラリが混在しても、統一された `import` 構文で扱えるようになります。                                                             |
| **`skipLibCheck`**                     | `true`   | `node_modules` 内にある宣言ファイル（`.d.ts`）の型チェックをスキップします。これにより、ライブラリ側の型の不整合によるエラーを無視し、**コンパイル時間を短縮**できます。                                                                          |
| **`forceConsistentCasingInFileNames`** | `true`   | ファイル名の大文字・小文字の区別を厳密に強制します。これにより、Windows や macOS（大文字・小文字を区別しないファイルシステム）で開発しても、Linux（大文字・小文字を区別する）などの環境でデプロイした際に発生する**インポートエラーを防ぎます**。 |
| **`resolveJsonModule`**                | `true`   | `.json` ファイルをモジュールとしてインポートできるようにします。設定ファイルなどを TypeScript コード内から直接読み込む際に便利です。                                                                                                              |
| **`isolatedModules`**                  | `true`   | **Babel** や **Vite** のようなトランスパイラ（単一ファイル変換ツール）と連携する際に推奨される設定です。TypeScript の機能のうち、ファイルを超えた情報が必要な機能（例: `const enum`）の使用を禁止し、ビルドの高速化と安全性を確保します。         |

---

### `references` (参照設定)

このセクションは、このファイルがモノレポ内の他の TypeScript プロジェクトを参照していることを示します。

| 設定項目         | 目的と役割                                                                                                                                                                                                                                                                                                                                                                                         |
| :--------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`references`** | モノレポ機能において、このルートの `tsconfig.json` が、配下の **`shared`**, **`backend`**, **`frontend`** の各プロジェクトを参照していることをコンパイラに伝えます。これにより、コンパイラはパッケージ間の依存関係を正確に把握し、`shared` パッケージの変更があった場合、依存する `backend` や `frontend` のみを選択的に再ビルドできるようになります。これは**ビルドの効率化**に不可欠な設定です。 |

この設定は、モダンな TypeScript 開発において、厳格な型チェックと、モノレポでの効率的なビルドを両立させるための**ベストプラクティス**に基づいています。
